<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon.ico">
	<link rel="icon" type="image/png" href="./assets/img/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Traveler</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
		name='viewport' />
	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700|Source+Sans+Pro:400,700"
		rel="stylesheet">
	<!-- Font Awesome Icons -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
		integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<!-- Main CSS -->
	<link href="./assets/css/main.css" rel="stylesheet" />
	<script src="./assets/js/api.js"></script>
</head>

<body>

	<nav class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
		<div class="container">
			<a class="navbar-brand" href="./index.html"><strong>Traveler</strong></a>
			<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02"
				aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="navbar-collapse collapse" id="navbarColor02">
				<ul class="navbar-nav mr-auto d-flex align-items-center">
					<li class="nav-item">
						<a class="nav-link" href="./index.html">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="./recommend.html">Recommend</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="./diary.html">Journey Diary</a>
					</li>
				</ul>
				<ul class="navbar-nav ml-auto d-flex align-items-center">

					<li class="nav-item highlight mx-3">
						<a class="nav-link" href="./login.html">Sign in</a>
					</li>
					<li class="nav-item highlight">
						<a class="nav-link" href="./register.html">Sign up</a>
					</li>
				</ul>
				<a class="nav-link" href="./user_info.html">
					<img class="rounded-circle shadow" src="assets/img/demo/avatar2.jpg" width="20">
					<span id="Name">BUPT</span>
				</a>
			</div>
		</div>
	</nav>

	<div class="container mt-5 mb-5">
		<div class="row">
			<div class="col-md-8">
				<h5 class="font-weight-bold spanborder"><span>Recommend</span></h5>
				<div class="row mb-5">
					<div class="col">
						<input type="text" class="form-control input-round" placeholder="Please enter keywords">
					</div>
					<div class="col">
						<button type="submit" class="btn btn-primary btn-round">Search</button>
					</div>
				</div>
				<div class="card border-0 mb-5 box-shadow">
					<div
						style="background-image: url(./assets/img/demo/1.jpg); height: 350px; background-size: cover; background-repeat: no-repeat;">
					</div>
					<div class="card-body px-0 pb-0 d-flex flex-column align-items-start">
						<h2 class="h2 font-weight-bold">
							<a class="text-dark" href="diary_show.html" id="article-title-0"></a>
						</h2>
						<p class="card-text" id="article-desc-0">

						</p>
						<div>
							<small class="d-block" id="article-author-0"><a class="text-muted" href="#"></a></small>
							<small class="text-muted" id="article-time-0"></small>
						</div>
					</div>
				</div>
				<h5 class="font-weight-bold spanborder"><span>Latest</span></h5>
				<div class="mb-3 d-flex justify-content-between">
					<div class="pr-3">
						<h2 class="mb-1 h4 font-weight-bold">
							<a class="text-dark" href="diary_show.html" id="article-title-5"></a>
						</h2>
						<p id="article-desc-5">

						</p>
						<div class="card-text text-muted small" id="article-author-5">

						</div>
						<small class="text-muted" id="article-time-5"></small>
					</div>
					<img height="120" src="./assets/img/demo/blog8.jpg">
				</div>
				<div class="mb-3 d-flex justify-content-between">
					<div class="pr-3">
						<h2 class="mb-1 h4 font-weight-bold">
							<a class="text-dark" href="diary_show.html" id="article-title-6"></a>
						</h2>
						<p id="article-desc-6">

						</p>
						<div class="card-text text-muted small" id="article-author-6">

						</div>
						<small class="text-muted" id="article-time-6"></small>
					</div>
					<img height="120" src="./assets/img/demo/1.jpg">
				</div>
				<div class="mb-3 d-flex justify-content-between">
					<div class="pr-3">
						<h2 class="mb-1 h4 font-weight-bold">
							<a class="text-dark" href="diary_show.html" id="article-title-7"></a>
						</h2>
						<p id="article-desc-7">

						</p>
						<div class="card-text text-muted small" id="article-author-7">

						</div>
						<small class="text-muted" id="article-time-7"></small>
					</div>
					<img height="120" src="./assets/img/demo/5.jpg">
				</div>
			</div>
			<div class="col-md-4 pl-4">
				<div class="sticky-top">
					<h5 class="font-weight-bold spanborder"><span></span></h5>
					<ol class="list-featured">
						<li>
							<span>
								<h6 class="font-weight-bold">
									<a href="diary_show.html" class="text-dark" id="article-title-1"></a>
								</h6>
								<p class="text-muted" id="article-author-1"></p>
							</span>
						</li>
						<li>
							<span>
								<h6 class="font-weight-bold">
									<a href="diary_show.html" class="text-dark" id="article-title-2"></a>
								</h6>
								<p class="text-muted" id="article-author-2"></p>
							</span>
						</li>
						<li>
							<span>
								<h6 class="font-weight-bold">
									<a href="diary_show.html" class="text-dark" id="article-title-3"></a>
								</h6>
								<p class="text-muted" id="article-author-3"></p>
							</span>
						</li>
						<li>
							<span>
								<h6 class="font-weight-bold">
									<a href="diary_show.html" class="text-dark" id="article-title-4"></a>
								</h6>
								<p class="text-muted" id="article-author-4"></p>
							</span>
						</li>
					</ol>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-5">
		<footer class="bg-white border-top p-3 text-muted small">
			<div class="row align-items-center justify-content-between">
				<div>
					<span class="navbar-brand mr-2"><strong>Traveler</strong></span> Copyright &copy;
					<script>document.write(new Date().getFullYear())</script>
					. All rights reserved.
				</div>
				<div>
					Made with <a target="_blank" class="text-secondary font-weight-bold" href="./login.html"> Theme</a>
					by
					xiaosan.com.
				</div>
			</div>
		</footer>
	</div>

	<script src="./assets/js/vendor/jquery.min.js"></script>
	<script src="./assets/js/vendor/popper.min.js"></script>
	<script src="./assets/js/vendor/bootstrap.min.js"></script>
	<script src="./assets/js/functions.js"></script>
	<script>
		window.onload = function () {
			$.ajax({
				url: `${baseUrl}/api/article/recommend`,
				type: 'GET',
				dataType: 'json',
				success: function (data) {
					// Check if we have at least 4 articles
					if (data.length >= 4) {
						// Update the HTML with the fetched data
						for (let i = 0; i < 4; i++) {
							$(`#article-title-${i + 1}`).text(data[i].title);
							$(`#article-title-${i + 1}`).attr('href', `diary_show.html?id=${data[i].id}`);
							$(`#article-author-${i + 1}`).text(data[i].author);
						}
					} else {
						console.error('Not enough articles returned from API');
					}
				},
				error: function (xhr, status, error) {
					console.error('Error fetching data:', error);
				}
			});
			$.ajax({
				url: `${baseUrl}/api/article/fine`,
				type: 'GET',
				dataType: 'json',
				success: function (data) {
					// Check if we have at least 4 articles
					$(`#article-title-0`).text(data[0].title);
					$(`#article-title-0`).attr('href', `diary_show.html?id=${data[0].id}`);
					$(`#article-author-0`).text(data[0].author);
					$(`#article-desc-0`).text(data[0].summary);
					$(`#article-time-0`).text(new Date(data[0].UpdatedAt).toLocaleString());

				},
				error: function (xhr, status, error) {
					console.error('Error fetching data:', error);
				}
			});
			$.ajax({
				url: `${baseUrl}/api/article/latest`,
				type: 'GET',
				dataType: 'json',
				success: function (data) {
					// Check if we have at least 4 articles
					if (data.length >= 3) {
						// Update the HTML with the fetched data
						for (let i = 0; i < 3; i++) {
							$(`#article-title-${i + 5}`).text(data[i].title);
							$(`#article-title-${i + 5}`).attr('href', `diary_show.html?id=${data[i].id}`);
							$(`#article-author-${i + 5}`).text(data[i].author);
							$(`#article-time-${i + 5}`).text(new Date(data[i].UpdatedAt).toLocaleString());
							// $(`#article-desc-${i + 5}`).text(data[i].summary);
						}
					} else {
						console.error('Not enough articles returned from API');
					}
				},
				error: function (xhr, status, error) {
					console.error('Error fetching data:', error);
				}
			});
		}
	</script>
</body>

</html>